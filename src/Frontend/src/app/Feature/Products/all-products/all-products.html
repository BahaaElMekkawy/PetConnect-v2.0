<!-- Modern Hero Section with Gradient -->
<section class="modern-hero-section">
  <div class="hero-gradient-bg">
    <div class="container section-title pb-0" data-aos="fade-up">
      <div class="hero-content">
        <h1 class="hero-title">Pet Products</h1>
        <p class="hero-subtitle">Discover premium pet essentials crafted with love and care for your beloved companions.
        </p>
        <div class="hero-nav-buttons">
          <button class="btn btn-outline-light btn-modern filter-toggle-btn" (click)="toggleFilters()">
            <i class="fas fa-filter me-2"></i>Filter Products
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Enhanced Filter Section -->
<section class="filter-section" [class.show]="showFilters">
  <div class="container">
    <div class="filter-card">
      <div class="filter-header">
        <h3 class="filter-title">
          <i class="fas fa-search me-2"></i>Find Your Perfect Products
        </h3>
        <p class="filter-subtitle">Filter by name, type, or price range</p>
      </div>
      <form class="filter-form">
        <div class="filter-grid">
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-tag me-2"></i>Product Name
            </label>
            <input type="text" [(ngModel)]="filterName" name="filterName" class="form-control modern-input"
              placeholder="Search by product name..." (input)="onFilterChange()" />
          </div>

          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-list me-2"></i>Product Type
            </label>
            <select [(ngModel)]="filterType" name="filterType" class="form-select modern-select"
              (change)="onFilterChange()">
              <option value="">-- All Types --</option>
              <option *ngFor="let type of productTypes" [value]="type">{{ type }}</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-dollar-sign me-2"></i>Min Price
            </label>
            <input type="number" [(ngModel)]="minPrice" name="minPrice" class="form-control modern-input"
              placeholder="Minimum price" step="0.01" (input)="onFilterChange()" />
          </div>

          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-dollar-sign me-2"></i>Max Price
            </label>
            <input type="number" [(ngModel)]="maxPrice" name="maxPrice" class="form-control modern-input"
              placeholder="Maximum price" step="0.01" (input)="onFilterChange()" />
          </div>
        </div>

        <div class="filter-actions">
          <!-- Removed Search Products button since filtering is now instant -->
          <button type="button" class="btn btn-outline-secondary btn-clear" (click)="clearFilters()">
            <i class="fas fa-times me-2"></i>Clear Filters
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- Loading State -->
<div *ngIf="loadingProducts" class="loading-section">
  <div class="container text-center">
    <div class="loading-spinner">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="loading-text mt-3">Loading amazing products...</p>
    </div>
  </div>
</div>

<!-- Enhanced Products Grid -->
<section class="products-section" *ngIf="!loadingProducts">
  <div class="container" data-aos="fade-up" data-aos-delay="100">
    <!-- Results Info -->
    <div class="results-info" *ngIf="filteredProducts.length > 0">
      <p class="results-text">
        <i class="fas fa-box me-2"></i>
        Showing {{ (currentPage - 1) * itemsPerPage + 1 }} - {{ Math.min(currentPage * itemsPerPage,
        filteredProducts.length) }} of {{ filteredProducts.length }} products
      </p>
    </div>

    <!-- No Results -->
    <div class="no-results" *ngIf="filteredProducts.length === 0 && !loadingProducts">
      <div class="no-results-content">
        <i class="fas fa-search no-results-icon"></i>
        <h3 class="no-results-title">No Products Found</h3>
        <p class="no-results-text">Try adjusting your filters or search terms</p>
        <button class="btn btn-primary" (click)="clearFilters()">
          <i class="fas fa-refresh me-2"></i>Show All Products
        </button>
      </div>
    </div>

    <!-- Products Grid -->
    <div class="products-grid" *ngIf="paginatedProducts.length > 0">
      <div *ngFor="let product of paginatedProducts" class="product-card-wrapper" data-aos="zoom-in"
        data-aos-delay="100">
        <div class="modern-product-card">
          <!-- Product Image -->
          <div class="product-image-container">
            <a [routerLink]="['/products', product.id]">
              <img [src]="server + product.imgUrl" [alt]="product.name" class="product-image" />
            </a>

            <div class="product-type-badge">{{ product.productTypeName }}</div>
          </div>

          <!-- Product Info -->
          <div class="product-info">
            <h5 class="product-name">{{ product.name }}</h5>
            <p class="product-description">{{ product.description }}</p>

            <div class="product-details">
              <div class="price-info">
                <span class="product-price">${{ product.price | number:'1.2-2' }}</span>
                <span class="stock-info" *ngIf="product.quantity > 0">
                  <i class="fas fa-box me-1"></i>{{ product.quantity }} available
                </span>
              </div>
            </div>

            <div class="product-actions">
              <button class="btn btn-primary btn-add-cart" [disabled]="product.quantity === 0"
                (click)="addToCart(product)">
                <i class="fas fa-shopping-cart me-2"></i>
                {{ product.quantity > 0 ? 'Add to Cart' : 'Out of Stock' }}
              </button>
              <a [routerLink]="['/products', product.id]" class="btn btn-outline-primary btn-view">
                <i class="fas fa-eye me-2"></i>View Details
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination Controls -->
    <div class="pagination-section" *ngIf="filteredProducts.length > itemsPerPage">
      <div class="pagination-info">
        <span class="pagination-text">
          Page {{ currentPage }} of {{ totalPages }}
        </span>
      </div>

      <div class="pagination-controls">
        <button class="btn btn-pagination" [disabled]="currentPage === 1" (click)="previousPage()">
          <i class="fas fa-chevron-left"></i>
          Previous
        </button>

        <div class="pagination-numbers">
          <button *ngFor="let page of [].constructor(totalPages); let i = index" class="btn btn-page-number"
            [class.active]="currentPage === i + 1" (click)="goToPage(i + 1)">
            {{ i + 1 }}
          </button>
        </div>

        <button class="btn btn-pagination" [disabled]="currentPage === totalPages" (click)="nextPage()">
          Next
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
</section>