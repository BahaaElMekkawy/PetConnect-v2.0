<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="h4 font-weight-bold mb-0">All Products</h2>
  </div>

  <div class="row mb-4 g-2 justify-content-center">
    <div class="col-md-4">
      <input type="text" class="form-control shadow-sm rounded" placeholder="Filter by type..."
             [(ngModel)]="filterType">
    </div>
    <div class="col-md-4">
      <input type="number" class="form-control shadow-sm rounded" placeholder="Exact price..."
             [(ngModel)]="filterExactPrice">
    </div>
    <div class="col-auto d-flex">
      <button class="btn btn-primary btn-sm shadow-sm me-2 rounded" type="button" (click)="applyFilters()">
        <i class="bi bi-search"></i> Search
      </button>
      <button class="btn btn-outline-secondary btn-sm shadow-sm rounded" type="button" (click)="clearFilters()">
        <i class="bi bi-x-circle"></i> Clear
      </button>
    </div>
  </div>
  <div *ngIf="loadingProducts" class="text-center p-5">
  <div class="spinner-border text-primary" role="status"></div>
  <p class="mt-3">Loading products ...</p>
</div>
  <!-- <div *ngIf="filteredProducts.length === 0" class="text-muted text-center">No products found.</div> -->

  <div class="row g-4 justify-content-center">
    <div *ngFor="let product of filteredProducts" class="col-6 col-sm-4 col-md-3">
      <div class="card h-100 shadow-sm">
        <a [routerLink]="['/products', product.id]">
          <img 
            [src]="server + product.imgUrl" 
            alt="Product image"
            class="card-img-top"
            style="height: 180px; object-fit: cover;">
        </a>
        <div class="card-body text-center d-flex flex-column">
          <h6 class="card-title text-truncate mb-2">Name : {{ product.name }}</h6>
          <h6 class=" text-muted my-2">Type : {{ product.productTypeName }}</h6>
          <p class="text-primary mb-3">Price : {{ product.price | currency:'USD' }}</p>
          @if(product.quantity>0){
            <p class="text-dark">In Stock : {{ product.quantity  }}</p>
          }
          @else {
            <p class="text-danger">Out of stock</p>

          }
          <button 
            class="btn btn-sm btn-outline-primary mt-auto mx-auto rounded-pill px-3"
            (click)="addToCart(product)" title="Add to cart"> Add to Cart
            <i class="bi bi-cart-plus"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
      
</div>
