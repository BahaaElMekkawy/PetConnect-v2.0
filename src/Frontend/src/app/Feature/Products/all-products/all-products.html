<section id="hero" class="hero section pb-0">
  <div
    class="container section-title aos-init aos-animate pb-0"
    data-aos="fade-up"
  >
    <h2>Products</h2>
    <p>Pet Essentials with Heart</p>

    <div class="container py-4 mt-3">
      <!-- <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="h4 font-weight-bold mb-0">All Products</h2>
      </div> -->

      <div class="row mb-4 g-2 justify-content-center">
        <div class="col-md-4">
          <input
            type="text"
            class="form-control shadow-sm rounded"
            placeholder="Filter by type..."
            [(ngModel)]="filterType"
          />
        </div>
        <div class="col-md-4">
          <input
            type="number"
            class="form-control shadow-sm rounded"
            placeholder="Exact price..."
            [(ngModel)]="filterExactPrice"
          />
        </div>
        <div class="col-auto d-flex">
          <button
            class="btn btn-primary btn-sm shadow-sm me-2 rounded"
            type="button"
            (click)="applyFilters()"
          >
            <i class="bi bi-search"></i> Search
          </button>
          <button
            class="btn btn-outline-secondary btn-sm shadow-sm rounded"
            type="button"
            (click)="clearFilters()"
          >
            <i class="bi bi-x-circle"></i> Clear
          </button>
        </div>
      </div>
      <div *ngIf="loadingProducts" class="text-center p-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-3">Loading products ...</p>
      </div>
      <!-- <div *ngIf="filteredProducts.length === 0" class="text-muted text-center">No products found.</div> -->

      <div class="row g-4 justify-content-center mt-5">
        <div
          *ngFor="let product of filteredProducts"
          class="col-6 col-sm-4 col-md-3"
        >
          <div class="card h-100 shadow-sm mx-2 mb-5">
            <a [routerLink]="['/products', product.id]">
              <img
                [src]="server + product.imgUrl"
                alt="Product image"
                class="card-img-top mt-2"
                style="object-fit: cover"
              />
            </a>
            <div class="card-body text-start pb-0 pt-5">
              <h4 class="card-title text-truncate mb-2 fw-bold">
                {{ product.name }}
              </h4>
              <p class="text-muted">{{ product.description }}</p>
              <span
                class="badge border text-secondary small"
                style="display: inline; white-space: nowrap"
              >
                {{ product.productTypeName }}
              </span>
              <p class="text-dark fw-semibold mb-3 mt-3">
                Price: {{ product.price | currency : "USD" }}
              </p>
              @if(product.quantity>0){
              <p class="text-dark">In Stock : {{ product.quantity }}</p>
              <button
                class="btn btn-sm btn-outline-primary mt-auto mx-auto rounded-pill px-3"
                (click)="addToCart(product)"
                title="Add to cart"
              >
                Add to Cart
                <i class="bi bi-cart-plus"></i>
              </button>
              } @else {
              <p class="text-danger">Out of stock</p>

              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
