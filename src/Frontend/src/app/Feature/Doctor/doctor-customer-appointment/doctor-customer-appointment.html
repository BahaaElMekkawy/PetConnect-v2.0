<section id="hero" class="hero section pb-0">
  <div
    class="container section-title aos-init aos-animate pb-0 col-md-6"
    data-aos="fade-up"
  >
    <h2>Confirm Your Appointment</h2>
    <p>
      You're about to schedule a visit with one of our trusted veterinary
      professionals—dedicated to keeping your pet safe, healthy, and happy.
      We’re here to provide compassionate, expert care when your pet needs it
      {{ pets.length }}
      most.
    </p>
  </div>
</section>

<!-- <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true"> -->

<div class="container m-5">
  <div *ngIf="loading" class="text-center p-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3">Loading pet details...</p>
  </div>
  <div class="row">
    <div
      class="col-md-6 mx-auto text-center"
      *ngIf="!loading && pets.length === 0"
    >
      You don't have any pets registered. Please
      <a routerLink="/add-pet" class="fw-semibold"> add a pet </a>to book an
      appointment.
    </div>
    <div class="col-md-6 mx-auto mb-5" *ngIf="!loading && pets.length > 0">
      <div class="modal-content">
        <div class="modal-header">
          <!-- <h5 class="modal-title" id="bookingModalLabel"></h5> -->
          <!-- <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button> -->
        </div>
        <div class="modal-body">
          <!-- @if(message) { -->
          <!-- <div class="alert alert-{{ messageType }} alert-message mb-3" role="alert"> -->
          <!-- {{ message }} -->
        </div>
        <!-- } -->

        <!-- @if (doctor && selectedDate && selectedSlot) { -->
        <!-- <p>You are about to book an appointment with <strong>Dr. {{ doctor.fName }} {{ doctor.lName }}</strong>.</p> -->
        <!-- <p>On <strong>{{ selectedDate | date: 'fullDate' }}</strong> at <strong>{{ selectedSlot.startTime }} - {{ selectedSlot.endTime }}</strong>.</p> -->
        @if(typeof doctor != 'string'){
        <form (ngSubmit)="confirmBooking()" [formGroup]="appointmentForm">
          <div class="mb-3">
            <label for="petId" class="form-label">Your Pet</label>
            <select class="form-select" name="petId" formControlName="petId">
              @if(pets.length>=1){
              <option value="" disabled selected>
                ---- Select Pet Name ----
              </option>
              } @else {
              <option value="" disabled selected>
                ---- You Don't Have Any Pets ----
              </option>

              } @for(pet of pets; track pet.id){
              <option [value]="pet.id">{{ pet.name }}</option>
              }
            </select>
            <!-- <input type="text" class="form-control" id="patientName"  name="patientName" required> -->
          </div>
          <div class="mb-3">
            <label for="doctorName" class="form-label">Dr Name : </label>
            <input
              type="text"
              class="form-control"
              id="doctorName"
              formControlName="doctorName"
              name="doctorName"
              required
            />
          </div>
          <div class="mb-3">
            <label for="notes" class="form-label">Notes (Optional)</label>
            <textarea
              class="form-control"
              id="notes"
              name="notes"
              formControlName="notes"
              rows="3"
              [disabled]="pets.length === 0"
            ></textarea>
          </div>
          <div>
            <!-- <input type="hidden" name="slotId" formControlName="slotId">
                <input type="hidden" name="customerId" formCOntrolName="customerId"> -->
          </div>
          <div class="d-grid gap-2 mt-4">
            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="pets.length === 0"
            >
              Confirm Booking
            </button>
            <button
              type="button"
              class="btn btn-danger"
              [routerLink]="['/doctors/', doctor.id]"
            >
              Cancel
            </button>
          </div>
        </form>
        <!-- } @else { -->
        <!-- <p class="text-danger">Error: Appointment details are missing.</p> -->
        <!-- } -->
        }
      </div>
    </div>
  </div>
</div>
<!-- </div> -->
<!-- </div> -->
