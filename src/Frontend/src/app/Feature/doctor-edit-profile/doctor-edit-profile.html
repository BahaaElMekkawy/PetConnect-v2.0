<div *ngIf="profileLoading()" class="container py-5">
  <div  class="text-center">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3">Loading doctor details...</p>
  </div>
</div>

 @if(typeof editedDoctor != 'string' && !profileLoading()){

<section id="hero" class="hero section pb-3">
    <div class="container section-title aos-init aos-animate pb-0" data-aos="fade-up">
        <h2>Hello, Dr. {{editedDoctor.FName}}</h2>
        <h3>Edit  profile</h3>
    </div>
</section>

<section class="section">
    <div class="container"> 
<form #formRef="ngForm" (ngSubmit)="onSubmit()" class="row g-3" enctype="multipart/form-data">

  <!-- Hidden ID field -->
  <input type="hidden" [(ngModel)]="editedDoctor.id" name="id" required #idRef="ngModel" />
  <div *ngIf="idRef.invalid && idRef.touched" class="text-danger">
    ID is required.
  </div>

  <!-- First name -->
  <div class="col-md-6">
    <label class="form-label">First name:</label>
    <input name="FName" [(ngModel)]="editedDoctor.FName" class="form-control" required #FNameRef="ngModel" />
    <div *ngIf="FNameRef.invalid && FNameRef.touched" class="text-danger">
      First name is required.
    </div>
  </div>

  <!-- Last name -->
  <div class="col-md-6">
    <label class="form-label">Last name:</label>
    <input name="LName" [(ngModel)]="editedDoctor.LName" class="form-control" required #LNameRef="ngModel" />
    <div *ngIf="LNameRef.invalid && LNameRef.touched" class="text-danger">
      Last name is required.
    </div>
  </div>

  <!-- Gender -->
  <div class="col-md-6">
    <label class="form-label">Gender:</label>
    <select name="Gender" [(ngModel)]="editedDoctor.Gender" class="form-select" required #GenderRef="ngModel">
      <option value="" disabled>-- Select Gender --</option>
      <option value="Female">Female</option>
      <option value="Male">Male</option>
    </select>
    <div *ngIf="GenderRef.invalid && GenderRef.touched" class="text-danger">
      Gender is required.
    </div>
  </div>

  <!-- Specialty -->
  <div class="col-md-6">
    <label class="form-label">Specialty:</label>
    <select name="PetSpecialty" [(ngModel)]="editedDoctor.PetSpecialty" class="form-select" required #SpecRef="ngModel">
      <option value="" disabled>-- Select Specialty --</option>
      <option value="Dog">Dog</option>
      <option value="Cat">Cat</option>
    </select>
    <div *ngIf="SpecRef.invalid && SpecRef.touched" class="text-danger">
      Specialty is required.
    </div>
  </div>

  <!-- Price -->
  <div class="col-md-6">
    <label class="form-label">Price per hour (EGP):</label>
    <input type="number" name="PricePerHour" [(ngModel)]="editedDoctor.PricePerHour"
           class="form-control" required min="1" max="10000" #PriceRef="ngModel" />
    <div *ngIf="PriceRef.invalid && PriceRef.touched" class="text-danger">
      Price must be between 1 and 10,000 EGP.
    </div>
  </div>


  <!-- Street -->
  <div class="col-md-6">
    <label class="form-label">Street:</label>
    <input name="Street" [(ngModel)]="editedDoctor.Street" class="form-control" required #StreetRef="ngModel" />
    <div *ngIf="StreetRef.invalid && StreetRef.touched" class="text-danger">
      Street address is required.
    </div>
  </div>

  <!-- City -->
  <div class="col-md-6">
    <label class="form-label">City:</label>
    <input name="City" [(ngModel)]="editedDoctor.City" class="form-control" required #CityRef="ngModel" />
    <div *ngIf="CityRef.invalid && CityRef.touched" class="text-danger">
      City is required.
    </div>
  </div>

  <!-- Upload Image -->
<div class="col-md-6">
  <label class="form-label">Upload Image:</label>
  <input type="file" name="ImageFile" (change)="onFileChange($event, 'image')" class="form-control" accept=".png,.jpg,.jpeg,.pdf" />
  <div *ngIf="imageError" class="text-danger">{{ imageError }}</div>
</div>

<!-- Upload Certificate -->
<div class="col-md-6">
  <label class="form-label">Upload Certificate:</label>
  <input type="file" name="CertificateFile" (change)="onFileChange($event, 'certificate')" class="form-control" accept=".png,.jpg,.jpeg,.pdf" />
  <div *ngIf="certificateError" class="text-danger">{{ certificateError }}</div>
</div>

<div class="col-md-6">
  <!-- <button [routerLink]="['/doctors','timeslot',editedDoctor.id]" class="btn btn-primary">Update Time Slot</button> -->
</div>

  <!-- Actions -->
  <div class="col-12 mt-4">
    <button type="submit" [disabled]="formRef.invalid" class="btn btn-primary mx-2">Save Changes</button>
    <a class="btn btn-outline-danger" (click)="goBack()">Cancel</a>
  </div>

</form>
    </div> 
</section>
}   