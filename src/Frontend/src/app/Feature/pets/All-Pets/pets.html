<section id="hero" class="hero section pb-0">
  <div
    class="container section-title aos-init aos-animate pb-0"
    data-aos="fade-up"
  >
    <h2>{{ title }}</h2>
    <p>Find your new best friend and give a rescued pet a loving home.</p>

    <!-- <div
      class="mt-3 d-flex justify-content-center gap-3"
      *ngIf="accountService.isAuthenticated()"
    >
      <a class="btn btn-primary btn-sm" routerLink="/categories">
        Manage Categories
      </a>
      <a class="btn btn-outline-primary btn-sm" href="/PetBread">
        Manage Breeds
      </a>
    </div> -->
  </div>
</section>

<div *ngIf="loading" class="text-center p-5">
  <div class="spinner-border text-primary" role="status"></div>
  <p class="mt-3">Loading pet details...</p>
</div>
<section style="background-color: #f7f6fe">
  <div
    class="container aos-init aos-animate"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    <form class="row g-3 mb-2" *ngIf="!loading">
      <!-- Category Filter -->
      <div class="col-md-4">
        <label for="categorySelect" class="form-label">Select Category</label>
        <select
          id="categorySelect"
          class="form-select"
          [(ngModel)]="filters.categoryId"
          name="categoryId"
          (change)="applyFilters()"
        >
          <option [ngValue]="''" selected>Select a category</option>
          <option *ngFor="let cat of categories" [ngValue]="cat.id">
            {{ cat.name }}
          </option>
        </select>
      </div>

      <!-- Age Sorting -->
      <div class="col-md-4">
        <label for="sortAge" class="form-label">Sort by Age</label>
        <select
          id="sortAge"
          class="form-select"
          [(ngModel)]="filters.sortOrder"
          name="sortOrder"
          (change)="applyFilters()"
        >
          <option [ngValue]="''">Default</option>
          <option [ngValue]="'asc'">Age: Low to High</option>
          <option [ngValue]="'desc'">Age: High to Low</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="locationSearch" class="form-label"
          >Search by Location</label
        >
        <input
          id="locationSearch"
          type="text"
          class="form-control"
          placeholder="Enter city or country"
          [(ngModel)]="filters.location"
          name="location"
          (input)="applyFilters()"
        />
      </div>
    </form>
  </div>
</section>
<section id="adoptable-pets" class="team section bg-light pt-0">
  <div
    class="container aos-init aos-animate"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    <div class="row g-5">
      <div class="alert alert-danger mt-3" *ngIf="failedLoad">
        No pets found matching your filters.
      </div>
      <div
        class="col-md-6 col-lg-3"
        *ngFor="let pet of filteredPets"
        data-aos="zoom-in"
        data-aos-delay="100"
      >
        <div class="team-card">
          <a [routerLink]="['/pet-details', pet.id]">
            <div class="team-image">
              <img
                [src]="getFullImageUrl(pet.imgUrl)"
                class="img-fluid"
                [alt]="pet.name"
              /></div
          ></a>
          <div class="team-content pet-info text-start">
            <h4>{{ pet.name }}</h4>
            <span class="fw-sem">
              <i class="fas fa-birthday-cake me-2 text-primary"></i>
              <span class="fw-semibold d-inline">Age:</span>
              {{ pet.age }} years</span
            >
            <span>{{ statusMap[pet.status] }}</span>
            <span
              class="text-success"
              *ngIf="accountService.getUserId() === pet.customerId"
              >Your Pet</span
            >

            <span *ngIf="accountService.getUserId() !== pet.customerId"
              ><span class="fw-semibold d-inline">
                <i class="fas fa-paw me-2 text-primary"></i>Owner:</span
              >
              {{ pet.customerName }}</span
            >
            <span *ngIf="accountService.getUserId() !== pet.customerId"
              ><span class="fw-semibold d-inline"
                ><i class="fas fa-map-marker-alt me-2 text-primary"></i
                >From:</span
              >
              {{ pet.customerCity }}</span
            >
            <div class="mt-3 d-flex gap-2">
              <a
                [routerLink]="['/pet-details', pet.id]"
                class="btn btn-outline-primary btn-sm"
                >Learn More</a
              >
              <button
                class="btn btn-primary btn-sm"
                *ngIf="
                  isDataReady &&
                  accountService.isAuthenticated() &&
                  accountService.getUserId() !== pet.customerId &&
                  !requestedPetIds.includes(pet.id)
                "
                (click)="sendAdoptionRequest(pet)"
              >
                Adopt Now
              </button>
              <button
                *ngIf="
                  isDataReady &&
                  accountService.isAuthenticated() &&
                  accountService.getUserId() !== pet.customerId &&
                  requestedPetIds.includes(pet.id)
                "
                class="btn btn-danger btn-sm"
                (click)="cancelAdoptionRequest(pet)"
              >
                Cancel Request
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="error && !loading" class="alert alert-danger text-center mt-4">
    {{ error }}
  </div>
</section>
<section
  id="call-to-action-blog"
  class="call-to-action-2 section light-background"
  style="background-color: #5d57f4; color: #fff !important"
>
  <div
    class="container aos-init aos-animate"
    data-aos="fade-up"
    data-aos-delay="100"
  >
    <div class="row g-5 align-items-center">
      <!-- Content on the Left -->
      <div
        class="col-lg-6 aos-init aos-animate"
        data-aos="fade-right"
        data-aos-delay="300"
      >
        <div class="cta-content">
          <h2 class="text-white">Adopt. Rescue. Love.<br /></h2>
          <h3 class="text-white">
            Your Guide to Giving Pets a Second Chance.<br />
          </h3>

          <p class="text-white" class="mt-3">
            Every pet deserves a loving home. Whether you’re opening your heart
            to a new companion or helping a stray find safety, you’re changing
            lives — including your own. Our adoption and rescue guides are here
            to make your journey smoother, kinder, and more rewarding.
          </p>
          <p class="text-white">
            From understanding adoption procedures to preparing your home and
            building trust with your new furry friend, we provide you with
            everything you need to ensure a happy, healthy life together.
          </p>

          <div class="cta-features">
            <div
              class="feature-item aos-init aos-animate"
              data-aos="zoom-in"
              data-aos-delay="400"
            >
              <i class="bi bi-check-circle-fill text-white"></i>
              <span>Step-by-Step Adoption Advice</span>
            </div>
            <div
              class="feature-item aos-init aos-animate"
              data-aos="zoom-in"
              data-aos-delay="450"
            >
              <i class="bi bi-check-circle-fill text-white"></i>
              <span>Rescue Success Stories</span>
            </div>
            <div
              class="feature-item aos-init aos-animate"
              data-aos="zoom-in"
              data-aos-delay="500"
            >
              <i class="bi bi-check-circle-fill text-white"></i>
              <span>Training & Adjustment Tips</span>
            </div>
            <div
              class="feature-item aos-init aos-animate"
              data-aos="zoom-in"
              data-aos-delay="550"
            >
              <i class="bi bi-check-circle-fill text-white"></i>
              <span>Health & Wellness Guidance</span>
            </div>
          </div>

          <div class="cta-action mt-5">
            <a [routerLink]="'/contact'" class="btn btn-outline-light btn-lg"
              >Ask for Help</a
            >
          </div>
        </div>
      </div>

      <!-- Image on the Right -->
      <div
        class="col-lg-6 aos-init aos-animate"
        data-aos="fade-left"
        data-aos-delay="200"
      >
        <div class="cta-image-wrapper text-center">
          <img
            src="assets/PetImages/dog-blog.png"
            alt="Adoption and Rescue Advice"
            class="img-fluid rounded-4"
            style="max-height: 400px"
          />
          <p class="mt-3 text-white" style="font-size: 0.95rem">
            <em
              >“Saving one animal won’t change the world, but it will change the
              world for that one animal.”</em
            >
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
