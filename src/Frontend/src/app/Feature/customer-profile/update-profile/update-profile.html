<section id="hero" class="hero section pb-0">
  <div
    class="container section-title aos-init aos-animate pb-0"
    data-aos="fade-up"
  >
    <h2>Profile</h2>
    <p>
      Keep track of your adoption journey.
      <br />
      Check the adoption reqests you sent, received and pets you added so far.
    </p>
  </div>
  <!-- End Section Title -->
</section>

<div class="container-fluid p-5">
  <div class="row px-5">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)" *ngIf="model">
      <div class="row">
        <!-- First Name -->
        <div class="col-md-6 mb-3">
          <label for="fName" class="form-label">First Name</label>
          <input
            type="text"
            id="fName"
            class="form-control"
            name="fName"
            [(ngModel)]="model.fName"
            required
            minlength="3"
            maxlength="20"
            #fNameRef="ngModel"
          />
          <span
            *ngIf="fNameRef.invalid && fNameRef.touched"
            class="text-danger small"
          >
            <span *ngIf="fNameRef.errors?.['required']"
              >First Name is required.</span
            >
            <span *ngIf="fNameRef.errors?.['minlength']"
              >Minimum 3 characters.</span
            >
            <span *ngIf="fNameRef.errors?.['maxlength']"
              >Maximum 20 characters.</span
            >
          </span>
        </div>

        <!-- Last Name -->
        <div class="col-md-6 mb-3">
          <label for="lName" class="form-label">Last Name</label>
          <input
            type="text"
            id="lName"
            class="form-control"
            name="lName"
            [(ngModel)]="model.lName"
            required
            minlength="3"
            maxlength="20"
            #lNameRef="ngModel"
          />
          <span
            *ngIf="lNameRef.invalid && lNameRef.touched"
            class="text-danger small"
          >
            <span *ngIf="lNameRef.errors?.['required']"
              >Last Name is required.</span
            >
            <span *ngIf="lNameRef.errors?.['minlength']"
              >Minimum 3 characters.</span
            >
            <span *ngIf="lNameRef.errors?.['maxlength']"
              >Maximum 20 characters.</span
            >
          </span>
        </div>

        <!-- Gender -->
        <div class="col-md-6 mb-3">
          <label for="gender" class="form-label">Gender</label>
          <select
            id="gender"
            class="form-select"
            name="gender"
            [(ngModel)]="model.gender"
            required
            #genderRef="ngModel"
          >
            <option [value]="0">Male</option>
            <option [value]="1">Female</option>
          </select>
          <span
            *ngIf="genderRef.invalid && genderRef.touched"
            class="text-danger small"
          >
            Gender is required.
          </span>
        </div>

        <!-- Street -->
        <div class="col-md-6 mb-3">
          <label for="street" class="form-label">Street</label>
          <input
            type="text"
            id="street"
            class="form-control"
            name="street"
            [(ngModel)]="model.street"
            required
            #streetRef="ngModel"
          />
          <span
            *ngIf="streetRef.invalid && streetRef.touched"
            class="text-danger small"
          >
            Street is required.
          </span>
        </div>

        <!-- City -->
        <div class="col-md-6 mb-3">
          <label for="city" class="form-label">City</label>
          <input
            type="text"
            id="city"
            class="form-control"
            name="city"
            [(ngModel)]="model.city"
            required
            #cityRef="ngModel"
          />
          <span
            *ngIf="cityRef.invalid && cityRef.touched"
            class="text-danger small"
          >
            City is required.
          </span>
        </div>

        <!-- Country -->
        <div class="col-md-6 mb-3">
          <label for="country" class="form-label">Country</label>
          <input
            type="text"
            id="country"
            class="form-control"
            name="country"
            [(ngModel)]="model.country"
            required
            #countryRef="ngModel"
          />
          <span
            *ngIf="countryRef.invalid && countryRef.touched"
            class="text-danger small"
          >
            Country is required.
          </span>
        </div>

        <!-- Optional: Age -->
        <!-- Uncomment if you have an age field in the model -->
        <!-- 
    <div class="col-md-6 mb-3">
      <label for="age" class="form-label">Age</label>
      <input
        type="number"
        id="age"
        class="form-control"
        name="age"
        [(ngModel)]="model.age"
        required
        min="18"
        #ageRef="ngModel"
      />
      <span *ngIf="ageRef.invalid && ageRef.touched" class="text-danger small">
        <span *ngIf="ageRef.errors?.['required']">Age is required.</span>
        <span *ngIf="ageRef.errors?.['min']"
          >You must be at least 18 years old.</span
        >
      </span>
    </div> -->

        <!-- Image Upload -->
        <div class="col-md-6 mb-4">
          <label for="image" class="form-label">Profile Image</label>
          <input
            type="file"
            id="image"
            name="image"
            class="form-control"
            (change)="onFileSelected($event)"
            accept="image/*"
          />
          <div *ngIf="imgUrl" class="mt-2">
            <img
              [src]="getFullImageUrl(imgUrl)"
              alt="Profile"
              class="img-thumbnail"
              style="max-height: 150px"
            />
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <button
        class="btn btn-primary"
        type="submit"
        [disabled]="isSubmitting || form.invalid"
      >
        {{ isSubmitting ? "Updating..." : "Update Profile" }}
      </button>
    </form>
  </div>
</div>
